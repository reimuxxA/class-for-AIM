# Stable Diffusion WebUI

>Stable Diffusion WebUI（AUTOMATIC1111，简称A1111）是一个为高级用户设计的图形用户界面（GUI），它提供了丰富的功能和灵活性，以满足复杂和高级的图像生成需求。由于其强大的功能和社区的活跃参与，A1111成为了Stable Diffusion模型事实上的标准GUI，并且是新功能和实验性工具的首选发布平台。

## ***txt2img:*** 执行Stable Diffusion的最基本功能：将文本提示转换成图像。

***基本用法***

***宽度和高度：*** 输出图像的尺寸。当使用v1模型时，您应该将至少一边设置为512像素。例如，将宽度设置为512，高度设置为768，以获得一个2:3的纵向图像。


***图像生成参数：*** 在上面生成图像的底部，我们可以看到一些关于图片生成的具体信息，具体到上面的例子，我们得到了下面的图片生成参数：
```
Prompt: a girl,0lg4kury,
Negative prompt: (unhealthy-deformed-joints:2),(unhealthy-hands:2),easynegative,ng_deepnegative_v1_75t,(worst quality:2),(low quality:2),(normal quality:2),lowres,bad anatomy,badhandv4,((extra limbs)),((extra legs)),((fused legs)),((extra arms)),((fused arms)),normal quality,((monochrome)),((grayscale)),((watermark)),uneven eyes,lazy eye,bad-hands-5,(((mutated hand))),
Steps: 20,

Sampler: DPM++ 2M Karras,

CFG scale: 7,

Seed: 1650696303,

Size: 512x512,

Clip skip: 2
```

***采样步骤：*** 去噪过程的采样步骤数。步数越多越好，但也需要更长时间。25步适用于大多数情况。

***CFG scale：*** **分类器无指导比例**是一个参数，用于控制模型应该多大程度上遵循您的提示。

1 - 大部分忽略您的提示。

3 - 更具创造性。

7 - 在遵循提示和自由之间取得良好的平衡。

15 - 更加遵循提示。

30 - 严格遵循提示。

***seed：*** 是在潜在空间中用于生成初始随机张量的种子值。从实际情况来看，它可以控制图像的内容。

每个生成的图像都有自己的种子值。如果在webUI中把seed设置为-1，它将使用一个随机的种子值。固定种子的一个常见原因是为了固定图像的内容并调整提示。
**你按照我的世界那样理解也行**

**extra seed** 

在上面界面上，你可以看到有两个非常重要的变量，分别是`Variation seed`和`Varation strength。`

Variation seed: 你想要使用的额外种子数值。

Varation strength: 表示的是在 种子 和 变化种子 之间的插值程度。将其设置为0表示使用 种子 的数值。将其设置为1使用 变化种子 数值。

理解为一种游离
我一张图片的种子是 1 ，额外种子的种子是 2 ，变化强度是1以内
这样我生成的图片的主体不变，但是背景之类的会变化。

不只是种子，图片的长宽比也能决定图片的样式。

**人脸修复**
settings--> user interface ->Quicksettings list 中把face_restoration加上去：

**高清修复Hires.fix.**
高分辨率修复（High-Resolution Upscaling）是一个在图像生成领域常见的概念，特别是在使用稳定扩散模型时。这个选项的目的是为了克服模型原生输出分辨率的限制，从而生成更大尺寸、更高质量的图像。

稳定扩散模型默认的输出分辨率通常是512像素（对于某些v2型号是768像素）。这个限制是由模型的设计和训练数据集决定的。对于一些应用场景，如打印、大尺寸展示或者高清屏幕显示，这样的分辨率可能不够用。

**upscaler上采样器：** 上采样器是图像处理中用于放大图像的工具。有很多采样器可以选择。

其中latent是一种比较特殊的采样器，它在所谓的“潜在空间”中工作。潜在空间是一个数学概念，用于表示图像生成模型在生成图像之前所处的中间状态。这类上采样器在图像生成的采样步骤之后应用，即在模型已经根据文本提示生成了一个初步的图像表示后，再对其进行放大处理。潜在上采样器的选项通常包括各种基于数学和机器学习原理的方法，它们可以在不改变图像构图的情况下增加图像的尺寸。

**高清步骤：** 仅适用于latent采样器。它指的是在放大潜在图像后进行的额外采样步骤的数量。更多的高清步骤意味着模型将有更多的机会细化图像的细节，可能产生更清晰、更高质量的图像。

**去噪强度：** 仅适用于latent采样器。它控制了在执行高清采样步骤之前添加到潜在图像的噪声。添加一定量的噪声可以帮助模型更好地学习和恢复图像的细节。太低可能无法有效恢复细节，太高则可能导致图像中出现不必要的伪影或失真。

**与传统的上采样器（如ESRGAN）** 相比，潜在上采样器不容易产生上采样伪影。这些伪影可能包括锐化过度、边缘不自然等现象，它们会影响图像的视觉质量。

但是潜在上采样器可能会在一定程度上改变原始图像

放大因子控制图像将放大多少倍。例如，将其设置为2会将一个512x768像素的图像放大为1024x1536像素。

## 图像下方的按钮们
**打开文件夹:** 打开图像输出文件夹。可能并非适用于所有系统。

**保存:** 保存一张图像。点击后，按钮下方将显示下载链接。如果选择图像网格，将保存所有图像。

**压缩:** 压缩图像以便下载。

**发送到img2img:** 将选定的图像发送到img2img选项卡。

**发送到修复:** 将选定的图像发送到img2img选项卡中的修复选项。

**发送到额外功能:** 将选定的图像发送到额外功能选项卡。



## **Img2img***

img2img的作用就是从一张图片来创建另外一张图片。

下面是基本的使用步骤：

**步骤1：** 将基本图像拖放到img2img页面上的img2img标签中

**步骤2：** 调整宽度或高度，使新图像具有相同的宽高比。您应该在图像画布中看到一个矩形框，表示宽高比。

**步骤3：** 设置采样方法和采样步数。通常使用DPM++ 2M Karass和20步。

**步骤4：** 将批处理大小设置为4。一次多生成几张图可以挑选出你更满意的图片。

**步骤5：** 为新图像编写提示。我将使用以下提示: a girl, sea。

**步骤6：** 点击生成按钮生成图像。调整去噪强度并重复。不同的去噪强度可以生成不同的图片。

*Resize mode：* 如果新图像的宽高比与输入图像不同，有几种方法可以解决差异。现在我的原图是1024x1024,现在我想生成的图是768x1024。

*Just resize* 将按比例缩放输入图像以适应新图像尺寸。它会拉伸或挤压图像。可以看到图片发生了挤压。

*Resize and fill* 将输入图像适应到新图像画布中。多余的部分将填充为输入图像的平均颜色。宽高比将被保留。

*Just resize (latent upscale)* 类似于Just resize，但缩放是在潜在空间中进行的。可以使用大于0.5的去噪强度以避免模糊图像。

*去噪强度：* 控制图像的变化程度。如果设置为0，则不会发生任何变化。如果设置为1，则新图像与输入图像无关。0.75是一个不错的平衡点，你可以自行进行探索。

**sketch**
webUI中的sketch的作用是把素描图转换成真实的图片。

*步骤1：* 转到img2img页面上的素描选项卡。

*步骤2：* 将背景图像上传到画布上。

*步骤3：* 写一个提示：a girl

*步骤4：* 点击生成。

当然，素描的作用不限于此，我们还可以对图片进行创意的修改。

**Inpaint**
在img2img选项卡中，也许最常用的功能就是图像修复。

如果你在txt2img选项卡中生成了一张喜欢的图像，但出现了一点小瑕疵，你想要重新生成它。那么就可以把这张图片发送到Img2Img中。

假设你在txt2img选项卡中生成了下面的图像。然后你想给这个图片上加上个项链，那么可以在需要项链的位置添加上mask，提示词添加：necklace。

**npaint upload**
Inpaint upload功能允许您上传一个独立的蒙版文件，而不是手动绘制它。

**Batch**
使用批处理可以对多张图片进行修复或进行图像转换。

## 从图像中获取Promot
Interogate CLIP 按钮会对您上传到 img2img 选项卡的图像进行猜测，并生成提示。当您想生成一个不知道提示词的图像时，这将非常有用。

步骤 1：转到 img2img 页面。

步骤 2：将图像上传到 img2img 选项卡。

步骤 3：点击 Interrogate CLIP 按钮。

## 图像放大
之前我们在文生图里面提到了有一个Hire.fix的功能可以实现图像放大的效果。

如果不是在文生图中，webUI也提供了一个非常有用的图像放大功能。你可以在Extras tab中找到它。

基本用法
按照以下步骤来放大图像。

*步骤1：* 导航到extras页面。

*步骤2：* 上传图像到图像画布。

*步骤3：* 在调整大小标签下设置按比例缩放因子。新图像将会按比例放大。

*步骤4：* 选择Upscaler 1。比较通用AI图像放大器是R-ESRGAN 4x+。

*步骤5：* 点击生成。您应该在右边得到一张新的图像。

## 扩展安装